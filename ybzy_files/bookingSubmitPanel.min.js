Site.bookingSubmitPanel={},function(U,b,w){var a,o=0,s=480,l=540,d=0,p=0,E={},c="",z="#module44",x=[],H=Fai.isIE6()||Fai.isIE7()||Fai.isIE8(),T=[],D={};b.dom={};var m=2052==Fai.top._lcid||1028==Fai.top._lcid;function i(){var t=(Fai.top.$("body").width()-p)/2,e=(Fai.top.$("body").height()-d)/2,i=[];return i.push('<div class="fk-panelFormBooking" id="fk-bookingSubmitPanel" style="display:none;">'),i.push('\t<div class="J_popup_bg f-contentBg J_contentBg"></div>'),i.push('\t<div class="f-content J_content" id="module44" style="width:'+p+"px; height:"+d+"px; top:"+e+"px; left:"+t+'px;">'),i.push('\t\t<div class="f-content-head">'),i.push('\t\t\t<div class="f-content-title"> </div>'),i.push("\t\t</div>"),i.push('\t\t<div class="f-innerContent" id="f-innerContent" style="overflow:hidden;"></div>'),i.push('\t\t<div class="bookingPanelMsg" id="bookingPanelMsg"></div>'),i.push('\t\t<a href="javascript:;" class="f-close J_close" onclick="return false;" title="关闭" hidefocus="true">关闭</a>'),i.push("\t</div>"),i.push("</div>"),i}function u(){var t=[];if(D.bookingOpen){var e=E.verticalShowType,i=d-110;t.push('<div class="tableWrap" id="tableWrap" style="height:'+i+'px">'),e?h(t):r(t),t.push("</div>")}else{var n=D.bookingClosedTip;Fai.top._manageMode&&(n+="，"+D.pleaseClick+"<a target='_blank' href='javascript:Site.openMallEdit(\"manageFrameBookingEdit\");'>"+D.setUp+"</a>"),t.push('\t\t<table class="bookingCloseTable" cellpadding="0" cellspacing="0">'),t.push('\t\t\t<tr><td style="text-align:center;">'),t.push('\t\t\t\t<div class="bookingClosePic"></div>'),t.push('\t\t\t\t<div class="bookingCloseTip">'+n+"</div>"),t.push("\t\t\t</td></tr>"),t.push("\t\t</table>")}var a=document.getElementById("tableWrap");null!=a&&a.parentNode.removeChild(a);var o=b.dom;o.innerContent.append(t.join("")),o.content.find(".f-content-title").text(E.moduleTitle),F()}function r(i){i.push('\t<table class="bookingSubmitPanel_table" cellpadding="0" cellspacing="0">'),i.push("\t\t<tbody>"),U.each(D.contentList,function(t,e){if(e.hide)return!0;i.push('\t\t<tr _contentId="'+e.id+'" _type="'+e.type+'">'),""==e.headline?i.push('\t\t\t<td class="column1"><div class="itemName" title="'+Fai.encodeHtml(e.name)+'">'+Fai.encodeHtml(e.name)+"</div></td>"):i.push('\t\t\t<td class="column1"><div class="itemName" title="'+Fai.encodeHtml(e.headline)+'">'+Fai.encodeHtml(e.headline)+"</div></td>"),i.push('\t\t\t<td class="column2">'),i.push('\t\t\t\t<div class="itemInput">'),i.push(n(e)),e.must&&5!=e.type?i.push('\t\t<span class="inputMust">*</span>'):i.push(""),i.push("\t\t\t\t</div>"),i.push("\t\t\t</td>"),i.push("\t\t</tr>")}),D.validation&&(i.push('\t\t<tr _validationTr="true">'),i.push('\t\t\t<td class="column1"><div class="itemName">'+LS.loginDialogCaptcha+"</div></td>"),i.push('\t\t\t<td class="column2">'),i.push('\t\t\t\t<div class="itemInput">'),i.push('\t\t\t\t\t<div class="validateInputAndCode">'),i.push('\t\t\t\t\t\t\t<input id="bookingVolidationCode" class="voteCodeInputText" type="text" maxlength="4"/>'),i.push('\t\t\t\t\t\t\t<img alt="" class="voteCodePic" onclick="Site.changeCaptchaImg(this, 3)" title="'+LS.msgBoradChageValidateCode+'" id="memberCaptchaImg" src="validateCode.jsp?validateCodeRegType=3&Math.random()*1000">'),i.push("\t\t\t\t\t</div>"),i.push('\t\t\t\t\t<span class="inputMust">*</span>'),i.push("\t\t\t\t</div>"),i.push("\t\t\t</td>"),i.push("\t\t</tr>")),i.push('\t\t\t<tr _submitTr="true">'),i.push("\t\t\t\t<td></td>"),i.push('\t\t\t\t<td class="column2">'),i.push('\t\t\t\t\t<div class="itemInput">'),i.push('\t\t\t\t\t\t<div class="addButtonshowType" id="bookingSubmitBtn">'),i.push('\t\t\t\t\t\t\t<div class="s_ibutton s_ibutton'+E[D.Def_BookingSubmit_BTN_STYLE]+'" type="botton" >'),i.push('\t\t\t\t\t\t\t\t<div class="left"></div>'),i.push('\t\t\t\t\t\t\t\t<div class="middle ">'+Fai.encodeHtml(D.buttonName)+"</div>"),i.push('\t\t\t\t\t\t\t\t<div class="right"></div>'),i.push("\t\t\t\t\t\t\t</div>"),i.push("\t\t\t\t\t\t</div>"),i.push("\t\t\t\t\t</div>"),i.push("\t\t\t\t</td>"),i.push("\t\t\t</tr>"),i.push("\t\t</tbody>"),i.push("\t</table>")}function h(i){i.push('\t<table class="bookingSubmitPanel_table vertical" cellpadding="0" cellspacing="0">'),i.push("\t\t<tbody>"),U.each(D.contentList,function(t,e){if(e.hide)return!0;i.push('\t\t<tr _contentId="'+e.id+'" _type="'+e.type+'">'),i.push('\t\t\t<td class="column1">'),""==e.headline?i.push('\t\t\t\t<div class="itemName" title="'+Fai.encodeHtml(e.name)+'">'+Fai.encodeHtml(e.name)+"</div>"):i.push('\t\t\t\t<div class="itemName" title="'+Fai.encodeHtml(e.headline)+'">'+Fai.encodeHtml(e.headline)+"</div>"),i.push('\t\t\t\t<div class="itemInput">'),i.push(n(e)),e.must&&5!=e.type?i.push('\t\t<span class="inputMust">*</span>'):i.push(""),i.push("\t\t\t\t</div>"),i.push("\t\t\t</td>"),i.push("\t\t</tr>")}),D.validation&&(i.push('\t\t<tr _validationTr="true">'),i.push('\t\t\t<td class="column1">'),i.push('\t\t\t\t<div class="itemName">'+LS.loginDialogCaptcha+"</div>"),i.push('\t\t\t\t<div class="itemInput">'),i.push('\t\t\t\t\t<div class="validateInputAndCode">'),i.push('\t\t\t\t\t\t\t<input id="bookingVolidationCode" class="voteCodeInputText" type="text" maxlength="4"/>'),i.push('\t\t\t\t\t\t\t<img alt="" class="voteCodePic" onclick="Site.changeCaptchaImg(this, 3)" title="'+LS.msgBoradChageValidateCode+'" id="memberCaptchaImg" src="validateCode.jsp?validateCodeRegType=3&Math.random()*1000">'),i.push("\t\t\t\t\t</div>"),i.push('\t\t\t\t\t<span class="inputMust">*</span>'),i.push("\t\t\t\t</div>"),i.push("\t\t\t</td>"),i.push("\t\t</tr>")),i.push('\t\t\t<tr _submitTr="true">'),i.push('\t\t\t\t<td class="column1">'),i.push('\t\t\t\t\t<div class="itemInput">'),i.push('\t\t\t\t\t\t<div class="addButtonshowType" id="bookingSubmitBtn">'),i.push('\t\t\t\t\t\t\t<div class="s_ibutton s_ibutton'+E[D.Def_BookingSubmit_BTN_STYLE]+'" type="botton" >'),i.push('\t\t\t\t\t\t\t\t<div class="left"></div>'),i.push('\t\t\t\t\t\t\t\t<div class="middle ">'+Fai.encodeHtml(D.buttonName)+"</div>"),i.push('\t\t\t\t\t\t\t\t<div class="right"></div>'),i.push("\t\t\t\t\t\t\t</div>"),i.push("\t\t\t\t\t\t</div>"),i.push("\t\t\t\t\t</div>"),i.push("\t\t\t\t</td>"),i.push("\t\t\t</tr>"),i.push("\t\t</tbody>"),i.push("\t</table>")}function n(t){var n=t.id,e=t.type,i=(t.name,t.must,t.input);p=t.placeholder==w?"":t.placeholder;var a=E[D.Def_BookingSubmit_ARRAY_STYLE],o=(D.Def_BookingSubmit_ARRAY_AUTO,D.Def_BookingSubmit_ARRAY_FIX),s=E[D.Def_BookingSubmit_FIX_NUM],l=i.split("\n"),c="",d=t.openAreaCode==w||t.openAreaCode,p=t.placeholder==w?"":t.placeholder,u=D.Def_LIMIT_INPUT_MAXLENTH,r=t.wordLimit;if(void 0===r?r={o:0,i:0,a:100}:1==(r=JSON.parse(r)).o&&(u=r.a),t.wordLimit=r,e==D.Def_ContentList_Type_SINGLE_LINE)c="<input class='singleLineTextInput bookingSingleText' id='bookingSingleText_"+n+"' value='"+Fai.encodeHtml("undefined"!=typeof D.memberName&&t.sys?D.memberName:"")+"' placeholder='"+Fai.encodeHtml(p)+"' type='text' maxlength='"+u+"'/>";else if(e==D.Def_ContentList_Type_MULTI_LINE)c="<textArea class='bookingMultLine' id='bookingMultLine_"+n+"' rows='3' placeholder='"+Fai.encodeHtml(p)+"' maxlength='"+u+"'/></textArea>";else if(e==D.Def_ContentList_Type_RADIO){var m=[];U.each(l,function(t,e){var i="radioR_"+n+"_"+t;t%s==0&&a==o&&m.push("<div class='arrangeFixBox'>"),m.push("\t\t\t<div class='singelChoice'>"),H?m.push("\t\t\t\t<input type='radio' name='radioR_"+n+"' id='"+i+"' value='"+Fai.encodeHtml(e)+"' /><label for='"+i+"'>"+Fai.encodeHtml(e)+"</label>"):m.push(N("radioR_"+n,e)),m.push("\t\t\t</div>"),t%s!=s-1&&t!=l.length-1||a!=o||m.push("</div>")}),c=m.join("")}else if(e==D.Def_ContentList_Type_MULTIPLECHOICE){var h=[];U.each(l,function(t,e){var i="radioC_"+n+"_"+t;t%s==0&&a==o&&h.push("<div class='arrangeFixBox'>"),h.push("<div class='multiChoice'>"),H?h.push("<input type='checkbox' name='radioC_"+n+"' id='"+i+"' value='"+Fai.encodeHtml(e)+"' /><label for='"+i+"'>"+Fai.encodeHtml(e)+"</label>"):h.push(P("radioC_"+n,e)),h.push("</div>"),t%s!=s-1&&t!=l.length-1||a!=o||h.push("</div>")}),c=h.join("")}else if(e==D.Def_ContentList_Type_DROPDOWN){var f=[];H?(f.push("<select class='dropDownSelect' id='dropDownSelect_"+n+"'>"),U.each(l,function(t,e){f.push("<option value='"+Fai.encodeHtml(e)+"'>"+Fai.encodeHtml(e)+"</option>")}),f.push("</select>")):f.push("<div class='dropDownNewSelect' id='dropDownNewSelect_"+n+"'></div>"),c=f.join("")}else if(e==D.Def_ContentList_Type_DESC)c=Fai.encodeHtml(i);else if(e==D.Def_ContentList_Type_DATE){var v=[],_="bookingDate_"+n,g=t.dateSetting,b=1==(g.type==w?0:g.type),S={id:_,dateSetting:g};if(x.push(S),v.push("<div class='siteFormMiddle'>"),v.push("<input type='text' class='g_itext siteFormTimer "+(b?"fk-startTime":"")+"' name='"+_+"' id='"+_+"' readonly />"),b){var F="bookingDate_"+n+"_end";S={id:F,dateSetting:g};x.push(S),v.push("<span class='fk-timeUtile'>"+LS.to+"</span>"),v.push("<div class='fk-endTimeWrap'>"),v.push("\t<input type='text' class='fk-endTime g_itext siteFormTimer' name='"+F+"' id='"+F+"' readonly />"),v.push("\t<div _startId = '"+_+"' class='J_endTimeMask fk-endTimeMask'></div>"),v.push("</div>")}v.push("</div>"),c=v.join("")}else if(e==D.Def_ContentList_Type_FILE_UPLOAD){var y=t.size>D.fileSizeLimit?D.fileSizeLimit:t.size,k=[];if(t.isAllFile)k.push("*.*;");else{var C=((t.dftl||"")+(t.cftl||"")).split(" ");U.each(C,function(t,e){if(0<e.length){var i="*."+e+";";k.push(i)}})}T.push({itemId:n,buttonValue:D.siteFormSelectFile,fileSize:y,srcjQueryUploadPath:D.srcjQueryUploadPath,fileTypeList:k});var I=[];I.push("<input type='button' class='fileUploadBtn' id='bookingUploadBtn_"+n+"' value='"+D.siteFormSelectFile+"'/>"),I.push("<div id='bookingUploadFile_"+n+"' class='bookingUploadFile' _tmpFileId='' style='display:none; margin: 8px 0 0 20px;'>"+LS.siteFormSubmitNotSeletcFile+"</div>"),I.push("<span id='bookingUploadDESC_"+n+"' style='margin: 8px 0 0 1%; display:inline-block;'><span class='siteFormFUDescIcons newSiteFormFUDescIcons'></span>"+D.siteFormFileSizeLimit+"："+y+"M</span>"),c=I.join("")}else if(e==D.Def_ContentList_Type_PHONE){var L=[];c=d?(H?(L.push("<select class='phoneSelect' id='phoneSelect_"+n+"'>"),U.each(D.mobileCtNameList,function(t,e){L.push("<option value='"+e.ctName+"'>"+e.ctShowName+e.ctCode+"</option>")}),L.push("</select>")):L.push("<div class='phoneNewSelect' id='phoneNewSelect_"+n+"'></div>"),L.push("<input class='bookingPhoneWithCode' id='bookingPhoneNum_"+n+"' value='"+Fai.encodeHtml("undefined"!=typeof D.memberMobile&&/^[0-9]*$/.test(D.memberMobile)&&t.sys?D.memberMobile:"")+"' type='number' onkeyup='(this.v=function(){this.value=this.value.replace(/[^0-9-]+/,\"\");}).call(this)'  oninput='if(value.length>11)value=value.slice(0,11)'/>"),L.join("")):"<input class='singleLineTextInput bookingPhoneNoCode' id='bookingPhoneNum_"+n+"' value='"+Fai.encodeHtml("undefined"!=typeof D.memberMobile&&/^[0-9]*$/.test(D.memberMobile)&&t.sys?D.memberMobile:"")+"' type='text' onkeyup='(this.v=function(){this.value=this.value.replace(/[^0-9-]+/,\"\");}).call(this)' oninput='if(value.length>11)value=value.slice(0,11)'/>"}else e==D.Def_ContentList_Type_MAIL?c="<input class='singleLineTextInput bookingMailInput' id='bookingMailInput_"+n+"' maxlength='50' type='text' name='input' />":e==D.Def_ContentList_Type_IDENTITY?c="<input class='singleLineTextInput bookingIdentityInput' id='bookingIdentityInput_"+n+"' type='text' name='input' />":e==D.Def_ContentList_Type_ADDRESS&&(c=j(t));return c}function N(t,e){var i=[];return i.push("\t<span class='jz-radio R_"+t+"' inputName='"+t+"'>"),i.push("\t\t<span class='jz-radio-inner'></span>"),i.push("\t\t<input name='"+t+"' type='radio' class='jz-radio-input' value='"+Fai.encodeHtml(e)+"'/>"),i.push("\t\t<span class='labelForRadio'>"+Fai.encodeHtml(e)+"</span>"),i.push("\t</span>"),i.join("")}function P(t,e){U(z).off("click.ncheckbox").on("click.ncheckbox",".jz-checkBox",function(){U(this).hasClass("jz-check-checked")?(U(this).removeClass("jz-check-checked"),U(this).find(".jz-radio-input").attr("checked",!1)):(U(this).addClass("jz-check-checked"),U(this).find(".jz-radio-input").attr("checked",!0))});var i=[];return i.push("\t<span class='bsCheckBox jz-checkBox C_"+t+"'>"),i.push("\t\t<span class='jz-checkBox-inner'></span>"),i.push("\t\t<input name='"+t+"' type='checkbox' style='display:none;' class='jz-radio-input' value='"+Fai.encodeHtml(e)+"'/>"),i.push("\t\t<span class='labelForCheckBox'>"+Fai.encodeHtml(e)+"</span>"),i.push("\t</span>"),i.join("")}function f(t){var g=function g(t){var a,i,e,o,n,s,l,c,d,p,u,r,m={container:U("body"),widgetClass:"selectTool",width:75,id:0,selectList:null,checkIndex:0,onchange:null,selectIcon:!1,selectListHeight:185,selectItemHeight:28,enable:!1},h="";if(!((a=this.opts=U.extend({},m,t,!0)).selectList.length<=0)){if(a.selectList.length*a.selectItemHeight<a.selectListHeight&&(a.selectListHeight=a.selectList.length*a.selectItemHeight),s=this,n=a.checkIndex,h='<div class="fk-select-widget J_select_widget '+a.widgetClass+'" id="J_'+a.widgetClass+a.id+'"><input class="seleInput" style="width:0; height:0; opacity:0; float:right;"/><div class="J_select_text_wrap f-select-text-wrap"><div class="f-select-text J_select_text '+(a.enable?"selectEnable":"")+'" value="'+a.selectList[n].value+'">'+Fai.encodeHtml(a.selectList[n].content)+'</div><a class="f-select-arrow J_select_arrow"></a></div></div>',a.container.append(h),i="",e=this.widgetDom=a.container.find("#J_"+a.widgetClass+a.id),b.dom.panel.find("#"+a.container.attr("id")+"_select_list").remove(),b.dom.panel.append('<ul class="f-select-list J_select_list" id="'+a.container.attr("id")+'_select_list" style="height:'+a.selectListHeight+'px; display:none;"></ul>'),o=b.dom.panel.find("#"+a.container.attr("id")+"_select_list"),U.each(a.selectList,function(t,e){i='<li class="f-select-item J_select_item'+(t==n?" f-select-on ":"")+'" selectIndex="'+t+'" style="'+a.selectItemHeight+'px;"><a class="J_radio_label" value="'+Fai.encodeHtml(e.value)+'">'+Fai.encodeHtml(e.content)+"</a></li>",o.append(i),i=""}),this.itemDom=c=o.find(".J_select_item"),l=a.selectItemHeight*a.selectList.length,a.selectIcon){var f="";f='<span class="J_select_img"></span>',this.itemDom.find(".J_radio_label").append(f)}a.selectListHeight<l&&o.mCustomScrollbar({theme:"select-theme"}),o.hide(),r=e.find(".seleInput"),d=e.find(".J_select_text"),c.off("click.selectTool").on("click.selectTool",function(){var t=U(this).find(".J_radio_label"),e=t.attr("value"),i=t.text(),n=U(this).index();a.checkIndex=n,d.attr("value",e),d.text(i),o.slideUp(150),p.removeClass("f-select-ratate-arrow"),c.removeClass("f-select-on"),U(this).addClass("f-select-on"),a.onchange&&a.onchange(U(this),n,s)}),p=e.find(".J_select_arrow"),u=a.container.parents("body"),e.find(".J_select_text_wrap").off("click.selectTool").on("click.selectTool",function(t){if(1==a.container.length&&!a.enable){if(o.is(":hidden")){var e=o.height(),i=a.container.height()+a.container.offset().top+10-U(window).scrollTop();i+e>Fai.top.$("body").height()&&(i=a.container.offset().top-a.container.height()-e+10-U(window).scrollTop()),o.css({width:a.container.width(),position:"absolute",top:i,left:a.container.offset().left}),u.find(".J_select_widget .J_select_arrow").removeClass("f-select-ratate-arrow"),o.slideDown(150),p.addClass("f-select-ratate-arrow")}else o.slideUp(150),p.removeClass("f-select-ratate-arrow");r.focus(),t.stopPropagation()}}),r.on("blur",function(){o.slideUp(150),o.parent().find(".J_select_arrow").removeClass("f-select-ratate-arrow")});var v="",_=navigator.userAgent.toLowerCase();v=/msie/.test(_)?"-ms-":/chrome/.test(_)||/safari/.test(_)||/yandex/.test(_)?"-webkit-":/mozilla/.test(_)?"-moz-":/opera/.test(_)?"-o-":/konqueror/.test(_)?"-khtml-":"",o.css(v+"user-select","none").attr("unselectable","on").on("selectstart mousedown",!1)}};return U.extend(g.prototype,{selectValue:function i(e){this.itemDom.each(function(){var t=U(this).find(".J_radio_label").attr("value");e!=t||U(this).trigger("click")})},getValue:function e(){return this.widgetDom.find(".J_select_text").attr("value")},destroy:function n(){this.widgetDom.find(".J_select_list").mCustomScrollbar("destroy"),this.opts=null,this.widgetDom=null},hideList:function a(){var t=this.widgetDom.find(".J_select_widget");t.slideUp(150),t.parent().find(".J_select_arrow").removeClass("f-select-ratate-arrow")}}),new g(t)}function j(t){var e,i=[],n=t.id,a=t.openMunicipalCode;return H?(i.push("<select class='addrSelect proSelect' id='proSelect_"+n+"' _contentId='"+n+"'>"),e=m?site_cityUtil.getProvince():site_cityUtil.getProvinceEn(),i.push("<option _val='-1' value='-1'>"+D.siteFormPleaseSelect+"</option>"),U.each(e,function(t,e){m?i.push("<option _val='"+e.name+"' value='"+e.id+"'>"+site_cityUtil.simpleCityNameStr(e.name)+"</option>"):i.push("<option _val='"+e.name+"' value='"+e.id+"'>"+site_cityUtil.simpleCityNameStrEn(e.name)+"</option>")}),i.push("</select>"),i.push("<select class='addrSelect citySelect' id='citySelect_"+n+"' _contentId='"+n+"' disabled>"),i.push("<option _val='-1' value='-1'>"+D.siteFormPleaseSelect+"</option>"),i.push("</select>"),a&&(i.push("<select class='addrSelect countySelect' id='countySelect_"+n+"' disabled>"),i.push("<option _val='-1' value='-1'>"+D.siteFormPleaseSelect+"</option>"),i.push("</select>"))):(i.push("<div class='addrNewSelect proNewSelect' id='proNewSelect_"+n+"'></div>"),i.push("<div class='addrNewSelect cityNewSelect' id='cityNewSelect_"+n+"'></div>"),a&&i.push("<div class='addrNewSelect countyNewSelect' id='countyNewSelect_"+n+"'></div>")),i.join("")}function v(t){var e,i,n=t.fileSize,a=t.itemId,o=t.moduleId,s=t.fileTypeList,l=t.buttonValue,c=(t.isModuleButtonStyle,t.showType,t.srcjQueryUploadPath),d=document.documentElement||document.body,p=U("#bookingUploadBtn_"+a);p.width();if(Fai.isIE()){var u={file_post_name:"Filedata",upload_url:"/ajax/upsiteimg_h.jsp",button_placeholder_id:"bookingUploadBtn_"+a,file_size_limit:n+"MB",button_image_type:6,file_queue_limit:1,requeue_on_error:!1,button_height:32,button_width:128,button_text:"<span class='fk_btText'>"+l+"</span>",button_text_style:".fk_btText{text-align:center; font-family: 微软雅黑; color: #333;}",button_text_top_padding:6,post_params:{ctrl:"Filedata",app:21,type:0,isSiteForm:!0},file_types:s.join(""),file_dialog_complete_handler:function h(t){this._allSuccess=!1,this.startUpload()},file_queue_error_handler:function f(t,e,i){switch(e){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:Fai.ing(LS.siteFormSubmitCheckFileSizeErr,!0);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:Fai.ing(LS.siteFormSubmitFileUploadNotAllow,!0);break;case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:Fai.ing(Fai.format(LS.siteFormSubmitFileUploadOneTimeNum,"一"),!0);break;default:Fai.ing(LS.siteFormSubmitFileUploadReSelect,!0)}},upload_success_handler:function v(t,e){var i=jQuery.parseJSON(e);this._allSuccess=i.success,this._sysResult=i.msg,i.success?(Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSucess,Fai.encodeHtml(t.name)),!0),k("upload",i,o,a)):Fai.ing(LS.siteFormSubmitFileUploadFile+t.name+"，"+i.msg)},upload_error_handler:function _(t,e,i){-280==e?Fai.ing(LS.siteFormSubmitFileUploadFileCancle,!1):-270==e?Fai.ing(Fai.format(LS.siteFormSubmitFileUploadFileExist,Fai.encodeHtml(t.name)),!0):Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSvrBusy,Fai.encodeHtml(t.name)))},upload_complete_handler:function g(t){t.filestatus==SWFUpload.FILE_STATUS.COMPLETE?setTimeout(function(){e.startUpload()},e.upload_delay):t.filestatus==SWFUpload.FILE_STATUS.ERROR&&Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSvrBusy,Fai.encodeHtml(t.name)))},upload_start_handler:function b(t){Fai.enablePopupWindowBtn(0,"save",!1),Fai.ing(LS.siteFormSubmitFileUploadPrepare,!1)},view_progress:function S(t,e,i,n){Fai.ing(LS.siteFormSubmitFileUploadIng+n+"%",!1)}};e=SWFUploadCreator.create(u)}else{var r=function r(){e=p.uploadify(m),p.on("click",function(){p.find("a")[0].click()})},m={auto:!0,fileTypeExts:s.join(""),multi:!0,fileSizeLimit:1024*n*1024,fileSplitSize:20971520,breakPoints:!0,isBurst:!1,saveInfoLocal:!1,showUploadedPercent:!0,showUploadedSize:!0,removeTimeout:9999999,post_params:{app:21,type:0,fileUploadLimit:n},getFileSizeUrl:"/ajax/advanceUpload.jsp?cmd=_getUploadSize",uploader:"/ajax/advanceUpload.jsp?cmd=_mobiupload",onUploadSuccess:function F(t,e){var i=U.parseJSON(e);i.success?(Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSucess,Fai.encodeHtml(t.name)),!0),k("upload",i,o,a)):Fai.ing("文件:"+t.name+"，"+i.msg)},onUploadError:function y(t,e){U("#progressBody_"+t.id).remove(),U("#progressWrap_"+t.id).remove(),Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSvrBusy,Fai.encodeHtml(t.name)))}};"function"==typeof p.uploadify?r():((i=document.createElement("script")).src=c,i.type="text/javascript",d.appendChild(i),i.onload=function(){r()})}}function k(t,e,i,n){if("upload"==t){var a=e.id,o=e.name,s=(e.type,e.size,e.path,e.createTime,e.groupId,e.fileId),l=U("#bookingUploadFile_"+n);U("#bookingUploadDESC_"+n).hide(),l.css("display","inline-block"),l.html(o),l.attr("_tmpFileId",a).attr("_tmpFileName",o).attr("title",o).attr("_fileId",s)}}function _(t){var e=[];e.push("pid="+o),e.push("&cmd=getPanelData"),e.push("&_colId="+Fai.top._colId),e.push("&_extId="+Fai.top._extId),U.ajax({type:"get",cache:!1,url:Site.genAjaxUrl("booking_h.jsp?")+e.join(""),error:function i(){Fai.ing("服务繁忙，请稍候重试",!1)},success:function n(t){var e=U.parseJSON(t);e.success?(D=e.pageData,c=D.css,E=D.moduleInfo,Fai.top._manageMode&&(a=D.itemList),u(),B()):Fai.ing("获取数据失败",!1)}})}function t(){var t=D.contentList,e=(D.Def_LIMIT_INPUT_MAXLENTH,D.Def_LIMIT_TEXTAREA_MAXLEN),i=[],n=[],a=!0;if(!(t.length<1)){for(var o=0;o<t.length;o++){var s=t[o];if(id=s.id,name=s.name,must=s.must,type=s.type,size=s.size,openAreaCode=s.openAreaCode,tmpItemContentList={id:id,type:type,must:must},0==type){var l=U.trim(U("#bookingSingleText_"+id).val()),c=0,d=100;if(must&&""==l)return M(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),a=!1;var p=s.wordLimit;if(void 0!==p&&1==parseInt(p.o)&&(c=p.i,d=p.a),l.length>d)return M(Fai.format(LS.siteFormSubmitInputMaxLength,Fai.encodeHtml(name),d)),a=!1;if(must&&l.length<c)return M(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),a=!1;tmpItemContentList.val=l}else if(1==type){var u=U.trim(U("#bookingMultLine_"+id).val());if(must&&""==u)return M(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),a=!1;if(u.length>e)return M(Fai.format(LS.siteFormSubmitInputMaxLength,Fai.encodeHtml(name),e)),a=!1;tmpItemContentList.val=u}else if(2==type){if(must&&0==U("input[name=radioR_"+id+"]:checked").length)return M(Fai.format(LS.siteFormSubmitCheckIsEmpty,Fai.encodeHtml(name))),a=!1;0<U("input[name=radioR_"+id+"]:checked").length?tmpItemContentList.val=U("input[name=radioR_"+id+"]:checked").first().val():tmpItemContentList.val=""}else if(3==type){if(must&&0==U("input[name=radioC_"+id+"]:checked").length)return M(Fai.format(LS.siteFormSubmitCheckIsEmpty,Fai.encodeHtml(name))),a=!1;var r=[];U("input[name=radioC_"+id+"]:checked").each(function(t,e){r.push(U(this).val())}),tmpItemContentList.val=r.join("\n")}else if(4==type){var m=U("#dropDownSelect_"+id+" option:selected").val();H||(m=U("#dropDownNewSelect_"+id).find(".f-select-text").attr("value")),tmpItemContentList.val=m}else{if(5==type)continue;if(6==type){l=U("#bookingDate_"+id).val();var h=s.dateSetting?s.dateSetting.type:0,f=1==h?U("#bookingDate_"+id+"_end").val():"";if(must&&""==l)return M(Fai.format(LS.siteFormSubmitCheckIsEmpty,Fai.encodeHtml(name))),a=!1;if(must&&1==h&&""==f)return M(Fai.format(LS.siteFormSubmitCheckIsEmpty,Fai.encodeHtml(name))),a=!1;1==h&&(l=U.trim(l)||U.trim(f)?l+" 至 "+f:""),tmpItemContentList.val=l}else if(7==type){var v=U("#bookingUploadFile_"+id),_={};if(must&&""==v.attr("_tmpFileId"))return M(Fai.format(LS.siteFormSubmitCheckHasFileUpload,Fai.encodeHtml(name))),a=!1;""==v.attr("_tmpFileId")?tmpItemContentList.val="":(tmpItemContentList.val=v.attr("_fileId"),_.tmpFileName=v.attr("_tmpFileName"),_.fileId=tmpItemContentList.val,_.tmpFileId=v.attr("_tmpFileId"),n.push(_))}else if(8==type){var g=U("#bookingPhoneNum_"+id).val();if(must&&""==g)return M(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),a=!1;if(must&&!Fai.isNationMobile(g))return M(Fai.format(LS.memberProfileItemCorrect,Fai.encodeHtml(name))),a=!1;if(openAreaCode){var b="";b=H?U("#phoneSelect_"+id).val():U("#phoneNewSelect_"+id).find(".f-select-text").attr("value"),U.trim(g)?tmpItemContentList.val=b+g:tmpItemContentList.val=""}else tmpItemContentList.val=g}else if(9==type){var S=U("#bookingMailInput_"+id).val();if(must&&""==S)return M(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),a=!1;if(must&&!Fai.isEmail(S))return M(Fai.format(LS.memberSignupUserAddItemCorrect,Fai.encodeHtml(name))),a=!1;tmpItemContentList.val=S}else if(10==type){var F=U("#bookingIdentityInput_"+id).val();if(must&&""==F)return M(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),a=!1;if(must&&!Fai.isCardNo(F))return M(Fai.format(LS.memberSignupUserAddItemCorrect,Fai.encodeHtml(name))),a=!1;tmpItemContentList.val=F}else if(11==type){var y=U("#proSelect_"+id).find("option:selected").attr("value"),k=U("#citySelect_"+id).find("option:selected").attr("value"),C=U("#countySelect_"+id).find("option:selected").attr("value"),I=U("#proSelect_"+id).find("option:selected").attr("_val"),L=U("#citySelect_"+id).find("option:selected").attr("_val"),w=U("#countySelect_"+id).find("option:selected").attr("_val");if(H||(y=U("#proNewSelect_"+id).find(".f-select-text").attr("value"),k=U("#cityNewSelect_"+id).find(".f-select-text").attr("value"),C=U("#countyNewSelect_"+id).find(".f-select-text").attr("value"),I=U("#proNewSelect_"+id).find(".f-select-text").text(),L=U("#cityNewSelect_"+id).find(".f-select-text").text(),w=U("#countyNewSelect_"+id).find(".f-select-text").text()),must&&("-1"==y||"-1"==k))return M(Fai.format(LS.siteFormSubmitInputIsEmpty,Fai.encodeHtml(name))),a=!1;I=-1==y?"":I,L=-1==k?"":L,w=-1==C?"":w,tmpItemContentList.val=I+L+w}}i.push(tmpItemContentList)}var x=U("#bookingVolidationCode").val();if(D.validation&&""==x)return M(Fai.format(LS.siteFormSubmitInputIsEmpty,LS.loginDialogCaptcha)),a=!1;if(!a)return!1;M(LS.siteFormSubmitIng),void 0!==U(z).data("bookingHasCommit")&&0!=U(z).data("bookingHasCommit")||(U(z).data("bookingHasCommit",!0),U.ajax({type:"post",url:"ajax/booking_h.jsp",data:"cmd=add&pid="+D.pid+"&validateCode="+x+"&submitContentList="+Fai.encodeUrl(U.toJSON(i))+"&tmpFileList="+Fai.encodeUrl(U.toJSON(n)),error:function T(){U(z).data("bookingHasCommit",!1),J(!1)},success:function N(t){if(U(z).data("bookingHasCommit",!1),(t=U.parseJSON(t)).success){var e=E[D.Def_BookingSubmit_JUMP_URL];setTimeout(function(){1==e.lt?Fai.top.location.href=E.jumpToUrl:Fai.top.location.reload(),A()},2500),J(!0,"",2e3)}else-401==t.rt?(J(!1,t.msg),U(".validateInputAndCode #bookingVolidationCode").val(""),U(".validateInputAndCode .voteCodePic").trigger("click")):-4==t.rt?J(!1,LS.bookingSubmitFullTips):-7==t.rt?J(!1,LS.siteImgFull):-2==t.rt?J(!1,LS.argsError):J(!1,LS.memberLoginError)}}))}}function M(t){var e=b.dom;e.bookingPanelMsg.html(t);var i=e.content.width(),n=e.bookingPanelMsg.width();e.bookingPanelMsg.css("left",(i-n)/2+"px"),e.bookingPanelMsg.show(),setTimeout(function(){e.bookingPanelMsg.hide()},3e3)}function J(t,e,i){var n={htmlContent:Site.getDialogContent(!1,Fai.format(e||LS.siteFormSubmitError)),width:205,height:78};if(t){var a=[];a.push("<div class='booking-sweet-alert' style='margin-top: 50px;'>"),a.push("\t<div class='sa-icon sa-success animate'>"),a.push("\t\t<span class='sa-line sa-tip animateSuccessTip'></span>"),a.push("\t\t<span class='sa-line sa-long animateSuccessLong'></span>"),a.push("\t\t<div class='sa-placeholder'></div>"),a.push("\t\t<div class='sa-fix'></div>"),a.push("\t</div>"),a.push("\t<div class='submitSuccessTitle'>"+LS.siteFormSubmitOk+"</div>"),a.push("</div>"),n={htmlContent:a.join(""),width:500,height:320,autoClose:i||0}}Site.popupBox(n)}function e(){H&&(U(".proSelect").change(function(){var t=U(this).attr("_contentId"),e=U(this).val(),i=[];i=m?site_cityUtil.getCities(e):site_cityUtil.getCitiesEn(e);var n=[];n.push("<option _val='-1' value='-1'>"+D.siteFormPleaseSelect+"</option>"),U.each(i,function(t,e){m?n.push("<option _val='"+e.name+"' value='"+e.id+"'>"+site_cityUtil.simpleCityNameStr(e.name)+"</option>"):n.push("<option _val='"+e.name+"' value='"+e.id+"'>"+site_cityUtil.simpleCityNameStrEn(e.name)+"</option>")}),U("#citySelect_"+t).removeAttr("disabled").html(n.join(""))}),U(".citySelect").change(function(){var t=U(this).attr("_contentId"),e=U(this).val(),i=[];i=m?site_cityUtil.getCounty(e):site_cityUtil.getCountyEn(e);var n=[];n.push("<option _val='-1' value='-1'>"+D.siteFormPleaseSelect+"</option>"),U.each(i,function(t,e){m?n.push("<option _val='"+e.name+"' value='"+e.id+"'>"+site_cityUtil.simpleCityNameStr(e.name)+"</option>"):n.push("<option _val='"+e.name+"' value='"+e.id+"'>"+site_cityUtil.simpleCityNameStrEn(e.name)+"</option>")}),U("#countySelect_"+t).removeAttr("disabled").html(n.join(""))}))}function g(){if(!H){var u=[];U.each(D.mobileCtNameList,function(t,e){u.push({content:e.ctShowName+e.ctCode,value:e.ctName})});var r=0;U(u).each(function(t,e){e.value==D.memberMobileCt&&(r=t)}),U.each(D.contentList,function(t,a){var o=a.id,e=a.type,i=a.input;if(e==D.Def_ContentList_Type_PHONE&&a.openAreaCode)f({container:U("#phoneNewSelect_"+o),widgetClass:"phoneCode",id:"phoneNewSelect",checkIndex:a.sys?r:0,width:120,selectList:u,onchange:function p(){}});else if(e==D.Def_ContentList_Type_DROPDOWN){var n=[],s=i.split("\n");U.each(s,function(t,e){n.push({content:e,value:e})}),f({container:U("#dropDownNewSelect_"+o),widgetClass:"drowDown",id:"dropDownNewSelect_",checkIndex:0,width:120,selectList:n,onchange:function p(){}})}else if(e==D.Def_ContentList_Type_ADDRESS){var l;l=m?site_cityUtil.getProvince():site_cityUtil.getProvinceEn();var c=[];c.push({content:D.siteFormPleaseSelect,value:-1}),U.each(l,function(t,e){c.push({content:e.name,value:e.id})});var d=f({container:U("#proNewSelect_"+o),widgetClass:"proAddr",id:"proNewSelect",checkIndex:0,width:120,selectList:c,onchange:function p(){var t;U("#countyNewSelect_"+o).empty(),f({container:U("#countyNewSelect_"+o),widgetClass:"cityAddr",id:"countyNewSelect_",checkIndex:0,width:120,selectList:[{content:D.siteFormPleaseSelect,value:-1}],enable:!0,onchange:function Be(){}});var e=d.getValue();t=m?site_cityUtil.getCities(e):site_cityUtil.getCitiesEn(e);var i=[];i.push({content:D.siteFormPleaseSelect,value:-1}),U.each(t,function(t,e){i.push({content:e.name,value:e.id})}),U("#cityNewSelect_"+o).empty();var n=f({container:U("#cityNewSelect_"+o),widgetClass:"cityAddr",id:"cityNewSelect",checkIndex:0,width:120,selectList:i,onchange:function Be(){var t,e=n.getValue();t=m?site_cityUtil.getCounty(e):site_cityUtil.getCountyEn(e);var i=[];i.push({content:D.siteFormPleaseSelect,value:-1}),U.each(t,function(t,e){i.push({content:e.name,value:e.id})}),a.openMunicipalCode&&(U("#countyNewSelect_"+o).empty(),f({container:U("#countyNewSelect_"+o),widgetClass:"cityAddr",id:"countyNewSelect_",checkIndex:0,width:120,selectList:i,onchange:function Be(){}}))}})}});f({container:U("#cityNewSelect_"+o),widgetClass:"cityAddr",id:"cityNewSelect",checkIndex:0,width:120,selectList:[{content:D.siteFormPleaseSelect,value:-1}],enable:!0,onchange:function p(){}}),f({container:U("#countyNewSelect_"+o),widgetClass:"cityAddr",id:"countyNewSelect_",checkIndex:0,width:120,selectList:[{content:D.siteFormPleaseSelect,value:-1}],enable:!0,onchange:function p(){}})}})}}function S(){H||U(z).off("click.nradio").on("click.nradio",".jz-radio",function(){var t=U(this).attr("inputName");U(".R_"+t).removeClass("jz-radio-checked"),U(this).find("input[name="+t+"]").attr("checked",!1),U(this).addClass("jz-radio-checked"),U(this).find(".jz-radio-input").attr("checked",!0)})}function F(){S(),e(),g(),Site.siteFormTimeBtn(x),Fai.top._manageMode?(U(".fileUploadBtn").click(function(){M("当前为管理态状态，文件上传无效")}),U("#bookingSubmitBtn .s_ibutton").click(function(){M("当前为管理态状态，提交无效")}),y()):(U.each(T,function(t,e){v(e)}),U("#bookingSubmitBtn .s_ibutton").click(function(){t()})),Fai.top.$("#fk-bookingSubmitPanel f-innerContent>.mCustomScrollbar").length<1&&Fai.top.$("#fk-bookingSubmitPanel .tableWrap").mCustomScrollbar({theme:"fk-gray",advanced:{updateOnContentResize:!0},axis:"y"})}function y(){var c=b.dom.content;if(!(c.length<0||0<b.dom.content.find(".J_resizableTip").length)){var t="<div class='ui-resizable-handle ui-resizable-e funPanelResizeHandle' _dir='0' style='z-index: 1000;'></div><div class='ui-resizable-handle ui-resizable-w funPanelResizeHandle' _dir='1' style='z-index: 1000;'></div><div class='ui-resizable-handle ui-resizable-s funPanelResizeHandle' _dir='2' style='z-index: 1000;'></div><div class='ui-resizable-handle ui-resizable-n funPanelResizeHandle' _dir='3' style='z-index: 1000;'></div>";c.append(U(t)),c.append("<a href='javascript:;' class='J_resizableTip ui-resizable-cancelTip fk-resizable-cancelTip "+(s==d&&l==p?"J_resizableTipHide":"")+"' id='J_resizableTip_44' style='z-index:9999;' _faiscoTip='还原默认宽度和高度'></a>"),b.dom.content.find(".J_resizableTip").click(function(){var t=(Fai.top.$("body").width()-l)/2;t=t<0?0:t;var e=(Fai.top.$("body").height()-s)/2;e=e<0?0:e,b.dom.content.css({width:+l,height:s,left:t,top:e}),b.dom.content.find("#tableWrap").css("height",s-110),U(this).hide(),i(l,s)}),c.children(".ui-resizable-handle").off("mousedown.pzresize").on("mousedown.pzresize",function(t){if(0==t.button){var s={clientX:t.clientX,clientY:t.clientY},l=c.width();startHeight=c.height(),handle=U(this),documentElem=U(document),direction=parseInt(handle.attr("_dir")),documentElem.off("mousemove.pzresize").on("mousemove.pzresize",function(t){U("#fk-moduleToolbar44").hide(),b.dom.content.find(".J_resizableTip").hide();var e={clientX:t.clientX,clientY:t.clientY},i=0,n=c.width();switch(resizeHeight=c.height(),direction){case 0:i=parseInt(e.clientX-s.clientX),n=l+2*i;break;case 1:i=parseInt(e.clientX-s.clientX),n=l-2*i;break;case 2:i=parseInt(e.clientY-s.clientY),resizeHeight=startHeight+2*i;break;case 3:i=parseInt(e.clientY-s.clientY),resizeHeight=startHeight-2*i}if(n=n<450?450:n,resizeHeight=resizeHeight<100?100:resizeHeight,direction<2){var a=(Fai.top.$("body").width()-n)/2;20<(a=a<=20?20:a)&&(c.css("width",n),b.dom.content.css("left",a))}else if(direction<4){var o=(Fai.top.$("body").height()-resizeHeight)/2;20<(o=o<=20?20:o)&&(c.css("height",resizeHeight),b.dom.content.find("#tableWrap").css("height",resizeHeight-110),b.dom.content.css("top",o))}}),documentElem.off("selectstart.pzsel").on("selectstart.pzsel",function(){return!1}),documentElem.off("mouseup.pzresize").on("mouseup.pzresize",function(t){documentElem.off("mousemove.pzresize").off("mouseup.pzresize").off("selectstart.pzsel"),i(c.width(),c.height())})}})}function i(i,n){var t={};t.w=i,t.h=n,U.ajax({type:"get",cache:!1,url:Site.genAjaxUrl("module_h.jsp?")+"cmd=set&id=44&style=104&pattern="+Fai.encodeUrl(JSON.stringify(t)),error:function e(){Fai.ing("服务繁忙，请稍候重试",!1)},success:function a(t){var e=jQuery.parseJSON(t);e.success?(p=i,s==(d=n)&&l==p?b.dom.content.find(".J_resizableTip").addClass("J_resizableTipHide"):b.dom.content.find(".J_resizableTip").removeClass("J_resizableTipHide")):Fai.ing(e.msg,!1)}})}}function C(){var t=b.dom;t.panel;t.panelBtn.close.click(function(){A()}),t.contentBg.click(function(){A()}),t.panel.on("mousewheel DOMMouseScroll",function(t){return!1})}function I(){var t=b.dom;1<Fai.top.$(".J_popup_bg").length&&t.contentBg.css("opacity",".15")}function L(t){var e=b.dom;e.panel=Fai.top.$("#fk-bookingSubmitPanel"),e.content=e.panel.find(z),e.contentBg=e.panel.find(".J_contentBg"),e.bookingPanelMsg=e.panel.find("#bookingPanelMsg"),e.innerContent=e.panel.find("#f-innerContent"),e.tableWrap=e.panel.find("#tableWrap"),e.panelBtn={},e.panelBtn.close=e.panel.find(".J_close"),"function"==typeof t.eventFunc&&setTimeout(function(){t.eventFunc.apply(b,arguments)},30),"function"==typeof t.styleFunc&&setTimeout(function(){t.styleFunc.apply(b,arguments)},30)}function B(){O({func:function e(){var t=b.dom;t.panel&&0<t.panel.length?t.panel.is(":hidden")&&t.panel.show():Fai.top.$("#fk-bookingSubmitPanel").show()}}),Fai.top._manageMode&&a&&0<a.length&&jzUtils.run({name:"moduleEditTool.init",callMethod:!0},{id:44,isDialog:!0,toolList:a})}function A(){R(),o=0,Fai.top.$("#fk-bookingSubmitPanel").find(".J_content").trigger("mouseleave.moduleEdit").end();var t=document.getElementById("fk-bookingSubmitPanel");null!=t&&t.parentNode.removeChild(t)}function R(){c="",a=[],x=[],T=[],D={}}function O(t){Fai.top.$("link[href='"+c+"']").length<1&&0<U.trim(c).length?Site.demandLoadCss(c,function(){"function"==typeof t.func&&t.func.apply(b,arguments)}):"function"==typeof t.func&&t.func.apply(b,arguments)}b.init=function(t){A();var e=JSON.parse(t);o=e.pid,d=0==d?e.panelHeight:d,p=0==p?e.panelWidth:p,Fai.top.$("body").append(i().join("")),L({eventFunc:C,styleFunc:I}),_()},b.refresh=function(){b.dom.innerContent.empty(),R(),_()}}(jQuery,Site.bookingSubmitPanel);