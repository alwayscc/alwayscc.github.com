function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function i(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Site.ImageEffect=Site.ImageEffect?Site.ImageEffect:{},function(e,t,i){t.DATA={},t.DATA.imageEffectHtml="<div class='imageEffects imageEffectsAnimate'></div>",t.DATA.KEY={OPT_MODULE_ID:"moduleId",OPT_IMG_EFF_OPTION:"imgEffOption",OPT_TG_OPTION:"tagetOption",OPT_CALLBACK:"callback",OPT_CALLBACK_ARGS:"callbackArgs",FULL_MASK_BG_STYLE:"fmbgs",FULL_MASK_NAME_STYLE:"fmns",FULL_MASK_NAME_ALIG:"fmna",FULL_MASK_DISC_STYLE:"fmds",FULL_MASK_DISC_ALIG:"fmda",FULL_MASK_CUS_BG:"fullMaskCusBg",FULL_MASK_CUS_NAME:"fullMaskCusName",FULL_MASK_CUS_DISC:"fullMaskCusDisc",FULL_MASK_OPEN_DISC:"fullMaskOpenDisc",HALF_MASK_BG_STYLE:"hmbgs",HALF_MASK_DISC_STYLE:"hmds",HALF_MASK_DISC_ALIG:"hmda",HALF_MASK_CUS_BG:"halfMaskCusBg",HALF_MASK_CUS_DISC:"halfMaskCusDisc",HALF_MASK_OPEN_DISC:"halfMaskOpenDisc",ALIG:{CENTER:1,LEFT:2,RIGHT:3}},t.FUNC={BASIC:{},BUS:{},TOOL:{}},t.ITF={cardTd:Site.bindImageEffectCusEvent_photo,moreCardTd:Site.bindImageEffectCusEvent_photo,"photo-container":Site.bindImageEffectCusEvent_photo,photoForm:Site.bindImageEffectCusEvent_photo,photoMarqueeForm:Site.bindImageEffectCusEvent_photo,photoSmallPic_table:Site.bindImageEffectCusEvent_photo,J_list_photos_masonry_item:Site.bindImageEffectCusEvent_photo,J_list_photos_accordion_item:Site.bindImageEffectCusEvent_photo,productTileForm:Site.bindImageEffectCusEvent_product,productMarqueeForm:Site.bindImageEffectCusEvent_product,"product-container":Site.bindImageEffectCusEvent_product,productDoublePicListForm:Site.bindImageEffectCusEvent_product,containerLeft:Site.bindImageEffectCusEvent_product,productHotTextListHot:Site.bindImageEffectCusEvent_product,productPicListForm:Site.bindImageEffectCusEvent_product,floatImg_J:Site.bindImageEffectCusEvent_floatImg}}(jQuery,Site.ImageEffect),function(m,A,e){A.FUNC.TOOL.resetImgEff=function(e,t,i,a){var o=e.targetParent,s=m(t).find("img");0==s.length&&(s=m(t).find(".J_fonticon"));var n=m(s).position().top,r=m(s).position().left,f=m(s).width(),p=m(s).height(),c=m(s).css("margin-left"),_=m(i).css("border-left-width"),l=(m(t).css("padding").replace("px",""),e.paramLayoutType||0),T=e.picScale||0,d=m(t).position().top,h=(m(t).height(),m(t).parent().css("padding-top").replace("px","")),g=e.moduleStyle||-1;c=A.FUNC.TOOL.parsePixelToInt(c),_=A.FUNC.TOOL.parsePixelToInt(_),"photoSmallPic_table"==o&&(c=n=r=0,f=m(t).width(),p=m(t).height(),m(i).css("z-index",1),m(i).css("left",r+c).css("top",n),m(i).css("width",f-2*_+"px"),m(i).css("height",p-2*_+"px")),"photo-container"!=o&&"product-container"!=o||(5!=a?(8==l&&2==a?m(i).css("left",0).css("top",d-h):2==T&&89==g?m(i).css("top",n):0==T&&30==g?m(i).css("top",n):m(i).css("left",r+c).css("top",n),2!=a&&3!=a&&5!=a||2!=T||m(i).css("left",0)):0<c&&m(i).css("left",r+c))},A.FUNC.TOOL.parsePixelToInt=function(e){return void 0===e||"auto"==e?0:parseInt(e.replace("px"))},A.FUNC.TOOL.colorRgb=function(e){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,i="#",a=[];if((e=e.toLowerCase())&&t.test(e)){if(4===e.length){for(var o=1;o<4;o+=1)i+=e.slice(o,o+1).concat(e.slice(o,o+1));e=i}for(o=1;o<7;o+=2)a.push(parseInt("0x"+e.slice(o,o+2)));return a.join(",")}return e}}(jQuery,Site.ImageEffect),function(E,O,e){function n(e,t,i,a,o){var s,n,r=i.effType,f=1,p=i.imgShapeType||1;if(E(t).parent().hasClass("cardDiv")&&(n=E(t).parent()),Fai.isIE6()||Fai.isIE7()||Fai.isIE8()){if(f=i.backgroundType?i.fullmaskBackgroundOpacity:80,i[O.DATA.KEY.FULL_MASK_CUS_BG]){var c=i[O.DATA.KEY.FULL_MASK_BG_STYLE];if("string"==typeof c&&0<c.length){var _=E.parseJSON(c);f="number"==typeof _.o?_.o:80}}f/=100}switch(r){case 2:var l,T,d,h;e.hover.opacity=1,e.leave.opacity=0,2!=p&&4!=p||(T=parseInt(E(t).css("borderWidth")),l=E(o).find(".floatImgWrap").width()-2*T,d=E(o).find(".floatImgWrap img").height(),h=E(o).find(".floatImgWrap img").width(),E(t).css({height:l+"px",width:l+"px",top:"0",left:"0"}),h<d?E(t).css({marginTop:(d-h)/2+"px"}):E(t).css({marginLeft:(h-d)/2+"px"}),4==p&&E(t).css({borderRadius:"50%"}));break;case 3:e.hover.opacity=1,e.leave.opacity=0;break;case 4:e.hover.opacity=f,e.leave.opacity=0;break;case 5:var g;E(t).css("opacity",1),(e.hover.bottom=0)<t.length&&(s=t[0].getBoundingClientRect().height),s=void 0===s?E(t).height():Math.round(s),e.leave.bottom="-"+s+"px",n&&0<n.length&&(g=parseFloat(n.css("margin-top").replace("px",""))||0,e.hover.bottom=-g,e.leave.bottom=-g-E(t).height()+"px");break;case 6:var m=parseInt(E(t).attr("_initWidth")),A=parseInt(E(t).attr("_initHeight"));e.hover.width=m+50,e.hover.height=A+50,e.hover.margin="-25px",i.isFontIcon&&(e.hover.fontSize=(m<A?m:A)+50+"px",e.hover.lineHeight=A+50+"px"),e.leave.width=m,e.leave.height=A,e.leave.margin="0px",i.isFontIcon&&(e.leave.fontSize=(m<A?m:A)+"px",e.leave.lineHeight=A+"px");break;case 7:e.hover["margin-left"]="-10px",e.leave["margin-left"]="0px"}}function r(e,t){var i=t.effType;if(4==i){var a=E(e).find(".props .propList"),o=E(a).height(),s=(E(e).height()-o)/2-10;E(a).css("padding-top",s+"px")}if(5==i){a=E(e).find(".props .propList");var n=E(e).find(".props .propBuy"),r=E(a).height(),f=0<a.length?parseInt(E(a).css("padding-top")):5,p=0<a.length?parseInt(E(a).css("margin-bottom")):10,c=E(e).parent().find("img").position().left,_=E(e).parent().find("img").css("margin-left");if(r+=f+p,0<E(n).length){var l=parseInt(E(n).css("margin-top"));r+=E(n).height()+l+8}E(e).css({height:r+"px",bottom:"-"+r+"px",left:c+_+"px"})}E(e).attr("fk_fixed",1)}function f(e,t,i){var a,o,s,n=t.effType;if(4==n){var r=E(i).parent(),f=-parseFloat(E(i).css("marginLeft").replace("px",""))||0;cardDivMT=-parseFloat(E(i).css("marginTop").replace("px",""))||0,E(e).css({width:r.width()+"px",height:r.height()+"px",left:f+"px",top:cardDivMT+"px"});var p=E(e).find(".props .propList"),c=E(p).height(),_=(E(e).height()-c)/2;E(p).css("padding-top",_+"px")}else if(5==n){e=E(i).find(".imageEffects");a=E(i).parent(),o=E(a).width(),s=E(a).height();var l=E(a).css("margin-left"),T=parseFloat(E(i).css("margin-left").replace("px",""));l=O.FUNC.TOOL.parsePixelToInt(l);E(e).removeClass("imageEffectsAnimate").addClass("imageEffectsAnimate_Half"),E(e).css("width",o);var d=E(p).height(),h=(p=E(e).find(".props .propList"),E(e).find(".props .propBuy")),g=(d=E(p).height(),parseInt(E(p).css("padding-top"))),m=parseInt(E(p).css("margin-bottom"));E(e).parent().find("img").position().left;if(0<d&&(d+=g+m),0<E(h).length){var A=parseInt(E(h).css("margin-top"));d+=E(h).height()+A+8}E(e).css("height",d+"px"),E(e).css({"padding-left":-T+"px"})}else if(6==n){if(o=(a=E(i).find("img")).width(),s=a.height(),0==o||0==s)return;E(a).attr("_initWidth",o).attr("_initHeight",s)}else if(7==n){if(0==(o=(a=E(i).find("img")).width()))return;a.css("width",o+10+"px")}E(e).attr("fk_fixed",1)}O.FUNC.BUS.bindImgEffCusEvent=function(e,t){"function"==typeof O.ITF[t.targetParent]&&O.ITF[t.targetParent](e,t)},O.FUNC.BUS.ImgEffAnimate=function(e,t,i,a,o){var s={hover:{},leave:{}};E(t).attr("fk_fixed")||(E(a).hasClass("cardDiv")?f(t,i,a):r(t,i)),n(s,t,i,o,a),Fai.isIE()?"mouseenter"==e?E(t).stop().animate(s.hover,250):"mouseleave"==e&&E(t).stop().animate(s.leave,250):"mouseenter"==e?E(t).css(s.hover):"mouseleave"==e&&E(t).css(s.leave)}}(jQuery,Site.ImageEffect),function(Y,G,n){function r(e,t){return 0!=e.length&&(0!=e[G.DATA.KEY.OPT_MODULE_ID]&&(Y.extend(t,e),!0))}function i(e,t){var i;!Fai.isNull(Y(e).find("a"))&&0!=Y(e).find("a").length?Y(e).find("a").after(G.DATA.imageEffectHtml):(0==(i=Y(e).find("img")).length&&(i=Y(e).find(".J_fonticon")),i.after(G.DATA.imageEffectHtml))}function a(e,t){0==Y(e).find(".J_photoImgPanel").length&&(Y(e).hasClass("floatImg_J_special")?Y(e).css("position","relative"):Y(e).css("position","relative").css("overflow","hidden")),Fai.isIE6()&&"photoSmallPic_table"==t[G.DATA.KEY.OPT_TG_OPTION].targetParent&&Y(e).removeAttr("style");var i=t[G.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0;if(t[G.DATA.KEY.OPT_TG_OPTION].picScale)var a=t[G.DATA.KEY.OPT_TG_OPTION].picScale||0;else a=t[G.DATA.KEY.OPT_IMG_EFF_OPTION].ns||0;var o,s,n,r,f,p,c,_,l,T,d,h,g,m,A,E=t[G.DATA.KEY.OPT_IMG_EFF_OPTION].effType,O=Y(e).find(".imageEffects"),I=2==E?"imageEffects_Border":3==E?"imageEffects_Magnifier":4==E?"imageEffects_FullMaks":5==E?"imageEffects_HalfMaks":"",u={bw:t[G.DATA.KEY.OPT_IMG_EFF_OPTION].borderType?t[G.DATA.KEY.OPT_IMG_EFF_OPTION].borderWidth:1,bs:t[G.DATA.KEY.OPT_IMG_EFF_OPTION].borderType?t[G.DATA.KEY.OPT_IMG_EFF_OPTION].borderStyle:1,bc:t[G.DATA.KEY.OPT_IMG_EFF_OPTION].borderType?t[G.DATA.KEY.OPT_IMG_EFF_OPTION].borderColor:8==i?"#808080":"#000"},F=1==u.bs?"solid":2==u.bs?"dotted":3==u.bs?"dashed":"",P=t[G.DATA.KEY.OPT_IMG_EFF_OPTION][G.DATA.KEY.FULL_MASK_BG_STYLE],S=t[G.DATA.KEY.OPT_IMG_EFF_OPTION][G.DATA.KEY.HALF_MASK_BG_STYLE],v={fbc:t[G.DATA.KEY.OPT_IMG_EFF_OPTION].fullmaskBackgroundColor,fbo:t[G.DATA.KEY.OPT_IMG_EFF_OPTION].fullmaskBackgroundOpacity},C={hbc:t[G.DATA.KEY.OPT_IMG_EFF_OPTION].halfmaskBackgroundColor,hbo:t[G.DATA.KEY.OPT_IMG_EFF_OPTION].halfmaskBackgroundOpacity},y={color:"#555555",opacity:80},b={color:"#000",opacity:85};"photoCard"==t.moduleType||"photoNewCard"==t.moduleType||"photoMoreCard"==t.moduleType?(o=Y(e).parent(),s=Y(o).width(),n=Y(o).height(),r=Y(o).css("margin-left"),imgMarginTop=Y(o).css("margin-top"),f=Y(o).position().top,p=Y(o).position().left,d=parseFloat(Y(e).css("margin-top").replace("px","")),h=parseFloat(Y(e).css("margin-left").replace("px",""))):(c=Y(e).position().top,_=Y(e).height(),l=Y(e).width(),Y(e).position().left,T=Y(e).parent().css("padding-top"),0==(o=Y(e).find("img")).length&&(o=Y(e).find(".J_fonticon")),s=Y(o).width(),n=Y(o).height(),r=Y(o).css("margin-left"),f=Y(o).position().top,p=Y(o).position().left,m=Y(e).width(),A=Y(e).height());Fai.isIE6()||Fai.isIE7()||Fai.isIE8();var D=t[G.DATA.KEY.OPT_IMG_EFF_OPTION].backgroundType;"object"==_typeof(v)&&D&&(y.color=0!=v.fbc.length?v.fbc:y.color,y.opacity="number"==typeof v.fbo?v.fbo:y.opacity);var L=t[G.DATA.KEY.OPT_IMG_EFF_OPTION][G.DATA.KEY.FULL_MASK_CUS_BG];"string"==typeof P&&0!=P.length&&L&&(P=Y.parseJSON(P),y.color=0!=P.c.length?P.c:y.color,y.opacity="number"==typeof P.o?P.o:y.opacity);var K=t[G.DATA.KEY.OPT_IMG_EFF_OPTION].backgroundHalfType;"object"==_typeof(C)&&K&&(b.color=0!=C.hbc.length?C.hbc:b.color,b.opacity="number"==typeof C.hbo?C.hbo:b.opacity);var N=t[G.DATA.KEY.OPT_IMG_EFF_OPTION][G.DATA.KEY.HALF_MASK_CUS_BG];t[G.DATA.KEY.OPT_IMG_EFF_OPTION][G.DATA.KEY.HALF_MASK_OPEN_DISC];switch("string"==typeof S&&0!=S.length&&N&&(S=Y.parseJSON(S),b.color=0!=S.c.length?S.c:b.color,b.opacity="number"==typeof S.o?S.o:b.opacity),r=G.FUNC.TOOL.parsePixelToInt(r),T=G.FUNC.TOOL.parsePixelToInt(T),E){case 1:Y(O).css("top",f);break;case 2:8==i?(l-=2*u.bw,_-=2*u.bw,s=l+2*(g=Y(e).css("padding").replace("px","")),n=_+2*g,Y(O).css("top",c-T)):(s-=2*u.bw,n-=2*u.bw,Y(O).css("top",f)),Y(O).css({"border-width":u.bw+"px","border-style":F}),Y(O)[0].style["border-image-slice"]=u.bw,Y(O).css(Site.CompatibleColor.borderStyle(u.bc));break;case 3:Y(O).css("top",f),Y(O).css("z-index","1");break;case 4:var M=y.color;Site.colorUtils.attachCompatibleStyleToDom(O[0]||O,M),Y(O).css("top",f);break;case 5:M=b.color;(N||K)&&Site.colorUtils.attachCompatibleStyleToDom(O[0]||O,M),Y(O).removeClass("imageEffectsAnimate").addClass("imageEffectsAnimate_Half"),Y(O).css("bottom","-"+n+"px");break;case 6:case 7:Y(O).css("top",f)}"photoCard"==t.moduleType||"photoNewCard"==t.moduleType||"photoMoreCard"==t.moduleType?5!=E?(Y(O).css({top:-d+"px"}),Y(O).css({left:-h+"px"})):Y(O).css({"padding-left":-h+"px"}):2==E&&8==i?Y(O).css("left",0):4!=E||2!=t.imgEffOption.style&&3!=t.imgEffOption.style&&30!=t.imgEffOption.style?Y(O).css("left",p+r):Y(O).css("left",0),2!=a||2!=E&&3!=E&&5!=E?(4!=E||2!=t.imgEffOption.style&&3!=t.imgEffOption.style&&30!=t.imgEffOption.style?Y(O).css("width",s):Y(O).css("width",s+2*r),Y(O).css("height",n)):(5==E?Y(O).css("width",m).css("height",A):2==E?Y(O).css("width",m-2*u.bw).css("height",A-2*u.bw):Y(O).css("width",m-2).css("height",A-2),Y(O).css("left",0)),Y(O).addClass(I)}function o(e,t){var i,a,o=Y(e).find("img"),s=t[G.DATA.KEY.OPT_IMG_EFF_OPTION];0==o.length&&(o=Y(e).find(".J_fonticon"));var n=t[G.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0;if(6==s.effType){var r=Y(o).width(),f=Y(o).height();if(s.forRefreshPic&&(o.data("realWidth")&&(r=o.data("realWidth")),o.data("realHeight")&&(f=o.data("realHeight"))),0==r||0==f)return;Y(o).attr("_initWidth",r).attr("_initHeight",f),a=Y(o).parent(),s.spScaleUp?a.hasClass("J_spScaleUp")||(i='<div class="J_spScaleUp" style="position:relative; overflow:hidden; margin:0px auto;"></div>',a.append(i),a.find(".J_spScaleUp").append(Y(o)).css({width:r,height:f})):a.hasClass("J_spScaleUp")&&(a.parent().append(Y(o)),a.remove())}if(7==s.effType){if(0==(r=Y(o).width()))return;8==n?Y(o).css("width",r+"px"):Y(o).css("width",r+10+"px")}}function s(e,t){var i=6==t[G.DATA.KEY.OPT_IMG_EFF_OPTION].effType?"imageEffectsAnimate_Magnify":"imageEffectsAnimate_MoveLeft",a=88==t[G.DATA.KEY.OPT_IMG_EFF_OPTION].style||89==t[G.DATA.KEY.OPT_IMG_EFF_OPTION].style||90==t[G.DATA.KEY.OPT_IMG_EFF_OPTION].style,o=6==t[G.DATA.KEY.OPT_IMG_EFF_OPTION].effType||7==t[G.DATA.KEY.OPT_IMG_EFF_OPTION].effType,s=(t[G.DATA.KEY.OPT_TG_OPTION].picScale,Y(e).find("img"));0==s.length&&(s=Y(e).find(".J_fonticon")),o&&a||Y(e).css({overflow:"hidden"}),s.addClass(i).css("margin","0px")}G.FUNC.BASIC.Init=function(e){var a={};a[G.DATA.KEY.OPT_MODULE_ID]=0,a[G.DATA.KEY.OPT_IMG_EFF_OPTION]={},a[G.DATA.KEY.OPT_TG_OPTION]={},a[G.DATA.KEY.OPT_CALLBACK]=n,a[G.DATA.KEY.OPT_CALLBACK_ARGS]=n;e.moduleId,e.imgEffOption;if(r(e,a)){var t=Y("#module"+a[G.DATA.KEY.OPT_MODULE_ID]),o=a[G.DATA.KEY.OPT_IMG_EFF_OPTION].effType;if(1!=o&&!Fai.isNull(t)){a[G.DATA.KEY.OPT_TG_OPTION].moduleStyle||(a[G.DATA.KEY.OPT_TG_OPTION].moduleStyle=t.attr("_modulestyle")),0!=t.attr("_intab")&&(G.cashOptions=G.cashOptions||{},G.cashOptions[e.moduleId]=e);var i=Y(t).find(".imageEffects"),s=Y(t).find("."+a[G.DATA.KEY.OPT_TG_OPTION].target);0<Y(i).length&&Y(i).remove(),Y.each(s,function(e,t){1<o&&o<6?(G.FUNC.BASIC.CreateGE(t,a),G.FUNC.BUS.bindImgEffCusEvent(t,a[G.DATA.KEY.OPT_TG_OPTION]),4!=o&&5!=o||Fai.isNull(a[G.DATA.KEY.OPT_CALLBACK])||a[G.DATA.KEY.OPT_CALLBACK](t,a[G.DATA.KEY.OPT_IMG_EFF_OPTION],a[G.DATA.KEY.OPT_TG_OPTION],a[G.DATA.KEY.OPT_CALLBACK_ARGS])):o<=7&&G.FUNC.BASIC.CreateSP(t,a)}),8==o?Site.hoverChangeImage(Y(t)):Y(s).off("mouseenter.imageEffectPlugs mouseleave.imageEffectPlugs").on("mouseenter.imageEffectPlugs mouseleave.imageEffectPlugs",function(e){var t=Y(this).find(".imageEffects"),i="";o<6?G.FUNC.TOOL.resetImgEff(a[G.DATA.KEY.OPT_TG_OPTION],this,t,o):o<=8&&0==(t=Y(this).find("img")).length&&(t=Y(this).find(".J_fonticon")),i="mouseenter"==e.type?"mouseenter":"mouseleave",1<o&&o<=7&&G.FUNC.BUS.ImgEffAnimate(i,t,a[G.DATA.KEY.OPT_IMG_EFF_OPTION],this,a[G.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0)});i=Y(t).find(".imageEffects")}}},G.FUNC.BASIC.CreateGE=function(e,t){i(e,t),a(e,t)},G.FUNC.BASIC.CreateSP=function(e,t){o(e,t),s(e,t)}}(jQuery,Site.ImageEffect);